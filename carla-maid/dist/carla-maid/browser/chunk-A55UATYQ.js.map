{
  "version": 3,
  "sources": ["src/app/book-now/payment-cancel/payment-cancel.component.ts"],
  "sourcesContent": ["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { PaymentService, PaymentStatus } from '../../shared/services/payment.service';\nimport { AnalyticsService } from '../../shared/services/analytics.service';\n\n@Component({\n  selector: 'app-payment-cancel',\n  standalone: true,\n  imports: [CommonModule, TranslateModule],\n  template: `\n    <div class=\"payment-cancel-container\">\n      <div class=\"cancel-card\">\n        <div class=\"cancel-icon\">\n          <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"#EF4444\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </div>\n        <h1>{{ 'payment.cancel.title' | translate }}</h1>\n        <p>{{ 'payment.cancel.message' | translate }}</p>\n        \n        @if(paymentStatus){\n          <div class=\"payment-details\">\n            <div class=\"detail-row\">\n              <span>{{ 'payment.orderId' | translate }}:</span>\n              <span>{{ paymentStatus.orderId }}</span>\n            </div>\n            <div class=\"detail-row\">\n              <span>{{ 'payment.status' | translate }}:</span>\n              <span class=\"status-cancelled\">{{ 'payment.status.cancelled' | translate }}</span>\n            </div>\n          </div>\n        }\n        \n        <div class=\"actions\">\n          <button class=\"btn-primary\" (click)=\"tryAgain()\">\n            {{ 'payment.tryAgain' | translate }}\n          </button>\n          <button class=\"btn-secondary\" (click)=\"goToHome()\">\n            {{ 'payment.backToHome' | translate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./payment-cancel.component.sass']\n})\nexport class PaymentCancelComponent implements OnInit {\n  paymentStatus?: PaymentStatus;\n  orderId?: string;\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private paymentService: PaymentService,\n    private analyticsService: AnalyticsService\n  ) {}\n\n  ngOnInit() {\n    // Prefer reading orderId from sessionStorage to avoid URL params\n    const storedOrderId = sessionStorage.getItem('paymentOrderId');\n    this.orderId = storedOrderId || this.route.snapshot.queryParams['orderId'];\n    \n    if (this.orderId) {\n      this.checkPaymentStatus();\n    }\n  }\n\n  checkPaymentStatus() {\n    if (this.orderId) {\n      this.paymentService.checkPaymentStatus(this.orderId).subscribe({\n        next: (status) => {\n          this.paymentStatus = status;\n          \n          // Track cancelled payment\n          this.analyticsService.trackEvent('payment_cancelled', {\n            order_id: status.orderId,\n            amount: status.amount,\n            currency: status.currency\n          });\n\n          // Clear session storage for cancelled payment\n          sessionStorage.removeItem('bookingData');\n          sessionStorage.removeItem('paymentOrderId');\n          sessionStorage.removeItem('paymentAmount');\n        },\n        error: (error) => {\n          console.error('Error checking payment status:', error);\n        }\n      });\n    }\n  }\n\n  tryAgain() {\n    this.router.navigate(['/book-now']);\n  }\n\n  goToHome() {\n    this.router.navigate(['/']);\n  }\n} "],
  "mappings": "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",
  "names": []
}
