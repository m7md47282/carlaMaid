import{a as v,b as w,j as S}from"./chunk-A4LBPGKM.js";import{X as y,a as f,b as u,ba as p,ga as n,k as h,n as g,r as b}from"./chunk-UCBXSWVS.js";var c=class i{constructor(e){this._sanitizer=e}selectedPostSubject=new h(null);selectedPost$=this.selectedPostSubject.asObservable();prepareParams({params:e,options:t}){let r=new v;if(e){t?.allowNull||(e=Object.fromEntries(Object.entries(e).filter(([o,a])=>a!=null&&a!=="")));for(let[o,a]of Object.entries(e))Array.isArray(a)?a.forEach((l,m)=>{r=r.append(`${o}[${m}]`,String(l))}):r=r.set(o,String(a))}return r}sanitizeHtml(e){return this._sanitizer.bypassSecurityTrustHtml(e)}stripHtml(e){let t=e.replace(/<[^>]*>/g,""),r=document.createElement("textarea");return r.innerHTML=t,r.value}selectPost(e){this.selectedPostSubject.next(e)}static \u0275fac=function(t){return new(t||i)(n(S))};static \u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})};var P={production:!0,wordpressApiBaseUrl:"https://carlamaid.qa/wordpress/index.php/wp-json/wp/v2",lang:"en",languages:["ar","en"],direction:"ltr",backendApiUrl:"https://api.carlamaid.qa/api",skipCash:{apiUrl:"https://api.skipcash.app",returnUrl:"https://carlamaid.qa/book-now?payment_success=true&order_id=",cancelUrl:"https://carlamaid.qa/book-now?payment_cancel=true&order_id=",callbackUrl:"https://carlamaid.qa/api/payment/callback"}};var j=class i{constructor(e,t){this._http=e;this._sharedService=t}wordpressApiBaseUrl=P.wordpressApiBaseUrl;getPosts(e){return this._http.get(`${this.wordpressApiBaseUrl}/posts`,{params:e})}getCategories(){return this._http.get(`${this.wordpressApiBaseUrl}/categories`)}getPostsByCategoriesNames(e,t,r){return this.getCategories().pipe(y(o=>{let a=o.filter(s=>t.some(d=>s.name.toLowerCase()===d.toLowerCase())).map(s=>s.id),l=o.find(s=>s.name.toLowerCase()===e.toLowerCase())?.id;if(a.length!==t.length)return g([]);let m=this._sharedService.prepareParams({params:u(f({},r),{categories:l})});return this.getPosts(m).pipe(b(s=>s.filter(d=>a.every(k=>d.categories.includes(k)))))}))}static \u0275fac=function(t){return new(t||i)(n(w),n(c))};static \u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})};export{c as a,j as b};
