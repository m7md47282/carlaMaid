{
  "version": 3,
  "sources": ["src/app/shared/services/analytics.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\n\ndeclare global {\n  interface Window {\n    dataLayer: any[];\n    gtag: (...args: any[]) => void;\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnalyticsService {\n\n  constructor() { }\n\n  /**\n   * Push data to Google Tag Manager dataLayer\n   */\n  pushToDataLayer(data: any): void {\n    if (typeof window !== 'undefined' && window.dataLayer) {\n      window.dataLayer.push(data);\n    }\n  }\n\n  /**\n   * Track page views\n   */\n  trackPageView(pageTitle: string, pagePath: string): void {\n    this.pushToDataLayer({\n      event: 'page_view',\n      page_title: pageTitle,\n      page_path: pagePath\n    });\n  }\n\n  /**\n   * Track form submissions (for lead generation)\n   */\n  trackFormSubmission(formName: string, formId?: string): void {\n    this.pushToDataLayer({\n      event: 'form_submit',\n      form_name: formName,\n      form_id: formId,\n      conversion_label: 'lead_generation'\n    });\n  }\n\n  /**\n   * Track phone calls (for call tracking)\n   */\n  trackPhoneCall(phoneNumber: string): void {\n    this.pushToDataLayer({\n      event: 'phone_call',\n      phone_number: phoneNumber,\n      conversion_label: 'phone_call'\n    });\n  }\n\n  /**\n   * Track booking completions\n   */\n  trackBookingComplete(serviceType: string, value?: number): void {\n    this.pushToDataLayer({\n      event: 'booking_complete',\n      service_type: serviceType,\n      value: value,\n      conversion_label: 'booking_conversion'\n    });\n  }\n\n  /**\n   * Track service inquiries\n   */\n  trackServiceInquiry(serviceType: string): void {\n    this.pushToDataLayer({\n      event: 'service_inquiry',\n      service_type: serviceType,\n      conversion_label: 'service_inquiry'\n    });\n  }\n\n  /**\n   * Track button clicks\n   */\n  trackButtonClick(buttonName: string, buttonLocation: string): void {\n    this.pushToDataLayer({\n      event: 'button_click',\n      button_name: buttonName,\n      button_location: buttonLocation\n    });\n  }\n\n  /**\n   * Track scroll depth\n   */\n  trackScrollDepth(percentage: number): void {\n    this.pushToDataLayer({\n      event: 'scroll_depth',\n      scroll_percentage: percentage\n    });\n  }\n\n  /**\n   * Track time on page\n   */\n  trackTimeOnPage(seconds: number): void {\n    this.pushToDataLayer({\n      event: 'time_on_page',\n      time_seconds: seconds\n    });\n  }\n\n  /**\n   * Track custom events\n   */\n  trackCustomEvent(eventName: string, parameters?: any): void {\n    this.pushToDataLayer({\n      event: eventName,\n      ...parameters\n    });\n  }\n\n  /**\n   * Track ecommerce events (if you add online booking)\n   */\n  trackPurchase(orderId: string, value: number, currency: string = 'USD'): void {\n    this.pushToDataLayer({\n      event: 'purchase',\n      transaction_id: orderId,\n      value: value,\n      currency: currency\n    });\n  }\n\n  /**\n   * Track SkipCash payment success with enhanced marketing data\n   */\n  trackSkipCashPaymentSuccess(orderId: string, value: number, currency: string = 'QAR', serviceType?: string): void {\n    // Standard purchase tracking\n    this.pushToDataLayer({\n      event: 'purchase',\n      transaction_id: orderId,\n      value: value,\n      currency: currency,\n      payment_method: 'skipcash',\n      service_type: serviceType || 'cleaning_service'\n    });\n\n    // Enhanced marketing tracking\n    this.pushToDataLayer({\n      event: 'payment_success',\n      payment_gateway: 'skipcash',\n      order_id: orderId,\n      amount: value,\n      currency: currency,\n      service_type: serviceType || 'cleaning_service',\n      conversion_type: 'payment_completion',\n      marketing_channel: 'website_direct'\n    });\n\n    // Revenue tracking for marketing campaigns\n    this.pushToDataLayer({\n      event: 'revenue_tracking',\n      revenue: value,\n      currency: currency,\n      order_id: orderId,\n      payment_method: 'skipcash',\n      conversion_source: 'website_booking'\n    });\n  }\n\n  /**\n   * Track payment initiation for funnel analysis\n   */\n  trackPaymentInitiation(orderId: string, value: number, currency: string = 'QAR'): void {\n    this.pushToDataLayer({\n      event: 'payment_initiated',\n      order_id: orderId,\n      amount: value,\n      currency: currency,\n      payment_gateway: 'skipcash',\n      funnel_step: 'payment_processing'\n    });\n  }\n\n  /**\n   * Track payment failure for optimization\n   */\n  trackPaymentFailure(orderId: string, errorReason?: string): void {\n    this.pushToDataLayer({\n      event: 'payment_failed',\n      order_id: orderId,\n      payment_gateway: 'skipcash',\n      error_reason: errorReason || 'unknown',\n      funnel_step: 'payment_processing'\n    });\n  }\n\n  /**\n   * Track booking completion with payment\n   */\n  trackBookingWithPayment(orderId: string, bookingOrderId: string, value: number, currency: string = 'QAR'): void {\n    this.pushToDataLayer({\n      event: 'booking_completed_with_payment',\n      payment_order_id: orderId,\n      booking_order_id: bookingOrderId,\n      amount: value,\n      currency: currency,\n      payment_method: 'skipcash',\n      conversion_type: 'full_booking_conversion'\n    });\n  }\n\n  /**\n   * Track customer lifetime value events\n   */\n  trackCustomerLifetimeValue(customerId: string, totalSpent: number, currency: string = 'QAR'): void {\n    this.pushToDataLayer({\n      event: 'customer_lifetime_value',\n      customer_id: customerId,\n      total_spent: totalSpent,\n      currency: currency,\n      payment_method: 'skipcash'\n    });\n  }\n\n  /**\n   * Track custom events\n   */\n  trackEvent(eventName: string, parameters: any = {}): void {\n    this.pushToDataLayer({\n      event: eventName,\n      ...parameters\n    });\n  }\n\n  /**\n   * Track user engagement\n   */\n  trackEngagement(action: string, category: string, label?: string): void {\n    this.pushToDataLayer({\n      event: 'user_engagement',\n      action: action,\n      category: category,\n      label: label\n    });\n  }\n} "],
  "mappings": "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",
  "names": []
}
