{
  "version": 3,
  "sources": ["src/app/blogs-list/blogs-list.component.ts", "src/app/blogs-list/blogs-list.component.html"],
  "sourcesContent": ["import { Component } from '@angular/core';\nimport { Router, RouterLink } from '@angular/router';\nimport { RouterModule } from '@angular/router';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { SharedService } from '../shared/services/shared.service';\nimport { WordPressService } from '../shared/services/word-press.service';\nimport { CommonModule } from '@angular/common';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'app-blogs-list',\n  standalone: true,\n  imports: [\n    TranslateModule,\n    RouterModule,\n\n    CommonModule,\n    RouterModule\n  ],\n  templateUrl: './blogs-list.component.html',\n  styleUrl: './blogs-list.component.sass'\n})\nexport class BlogsListComponent {\n  lang: string = 'en';\n  posts!: any[];\n  blogsPosts: any[] = [];\n  selectedPost: any;\n\n  private selectedPostSource = new BehaviorSubject<any>(null); // to send the post \n  selectedPost$ = this.selectedPostSource.asObservable(); // to send the post \n\n  constructor(\n    private translateService: TranslateService,\n    protected _sharedService: SharedService,\n    private _wordPressService: WordPressService,\n    private router: Router\n  ) {\n    this.lang = this.translateService.currentLang || 'en';\n    this.translateService.onLangChange.subscribe(() => {\n      this.lang = this.translateService.currentLang || 'en';\n    });\n  }\n\n  ngOnInit(): void {\n    this._sharedService.selectedPost$.subscribe(post => {\n      this.selectedPost = post;\n    });\n    this.getBlogsPosts();\n  }\n\n\n  /**\n   * Extracts the post thumbnail image URL\n   * First checks for WordPress featured media, then falls back to content images\n   * @param post - The WordPress post object\n   * @returns The image URL or default image path\n   */\n  getPostImage(post: any): string {\n    // Check for featured media in _embedded\n    if (post._embedded && post._embedded['wp:featuredmedia'] && post._embedded['wp:featuredmedia'][0]) {\n      const featuredMedia = post._embedded['wp:featuredmedia'][0];\n      // Try to get medium_large or medium size first for better performance\n      if (featuredMedia.media_details && featuredMedia.media_details.sizes) {\n        // Priority order: medium_large > large > medium > thumbnail\n        if (featuredMedia.media_details.sizes.medium_large) {\n          return featuredMedia.media_details.sizes.medium_large.source_url;\n        }\n        if (featuredMedia.media_details.sizes.large) {\n          return featuredMedia.media_details.sizes.large.source_url;\n        }\n        if (featuredMedia.media_details.sizes.medium) {\n          return featuredMedia.media_details.sizes.medium.source_url;\n        }\n        if (featuredMedia.media_details.sizes.thumbnail) {\n          return featuredMedia.media_details.sizes.thumbnail.source_url;\n        }\n      }\n      // Fall back to full size image (only if no optimized sizes available)\n      if (featuredMedia.source_url) {\n        return featuredMedia.source_url;\n      }\n    }\n    \n    // Fall back to extracting first image from content\n    if (post.content && post.content.rendered) {\n      const doc = new DOMParser().parseFromString(post.content.rendered, \"text/html\");\n      const img = doc.querySelector(\"img\");\n      if (img && img.src) {\n        return img.src;\n      }\n    }\n    \n    // Default image if nothing found\n    return \"../../assets/images/posts/default.png\";\n  }\n  getBlogsPosts(): void {\n    const postsPage = 'blogs';\n    const categoriesNames = [postsPage, this.lang];\n\n    const params = {\n      per_page: 100,\n      page: 1\n    };\n\n    console.log('üîç Fetching blogs with categories:', categoriesNames);\n\n    this._wordPressService.getPostsByCategoriesNames(postsPage, categoriesNames, params).subscribe({\n      next: (value: any) => {\n        console.log('üìù Received posts:', value.length);\n        \n        // Debug: Check first post's image data\n        if (value.length > 0) {\n          const firstPost = value[0];\n          console.log('üñºÔ∏è First post image debug:');\n          console.log('  - Has _embedded?', !!firstPost._embedded);\n          console.log('  - Has featured media?', !!firstPost._embedded?.['wp:featuredmedia']);\n          if (firstPost._embedded?.['wp:featuredmedia']?.[0]) {\n            console.log('  - Featured image URL:', firstPost._embedded['wp:featuredmedia'][0].source_url);\n            console.log('  - Available sizes:', Object.keys(firstPost._embedded['wp:featuredmedia'][0].media_details?.sizes || {}));\n          } else {\n            console.warn('  ‚ö†Ô∏è No featured image found for first post');\n          }\n          console.log('  - Extracted image URL:', this.getPostImage(firstPost));\n        } else {\n          console.warn('‚ö†Ô∏è No posts returned! Check WordPress categories.');\n        }\n        \n        this.blogsPosts = value;\n        this.posts = value;\n      },\n      error: (error: any) => {\n        console.error('‚ùå Error fetching blog posts:', error);\n      }\n    });\n  }\n\n  sendPost(postId: any) {\n    this.router.navigate(['/view-blogs', postId]);\n  }\n}\n", "<section class=\"section-1 center flex-column\">\n    <h1 class=\"text-align-center hero-title\">{{\"shared.BestCleaningCompanyInQatar\" | translate}}</h1>\n</section>\n\n\n<section class=\"section-7 fade-in animation-delay\">\n    <h1 class=\"primary-text-color center title-size\">{{ 'blogs.latestNewAndBlogs' | translate }}</h1>\n\n    <div class=\"gap-30 flex-wrap center new-blogs fade-in-animation\">\n        @for (post of blogsPosts; track $index) {\n\n        <figure class=\"service-item center\" (click)=\"sendPost(post.id)\"\n            [style.backgroundImage]=\"'url(' + getPostImage(post) + ')'\"\n            style=\"background-size: cover; background-position: center;\">\n            <figure class=\"service-content\">\n                <h3>{{_sharedService.stripHtml(post.title.rendered)}}</h3>\n                <p>{{_sharedService.stripHtml(post.content.rendered) | slice:0:200}}<span\n                        *ngIf=\"_sharedService.stripHtml(post.content.rendered).length > 200\">...</span></p>\n            </figure>\n        </figure>\n        }\n    </div>\n\n</section>"],
  "mappings": "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",
  "names": []
}
