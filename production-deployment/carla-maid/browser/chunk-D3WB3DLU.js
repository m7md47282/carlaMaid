import{a as y,b as v,j as S}from"./chunk-FJGNB7MU.js";import{$ as p,V as w,a as d,b,ea as n,k as h,n as u,r as g}from"./chunk-HNLREC5R.js";var c=class i{constructor(e){this._sanitizer=e}selectedPostSubject=new h(null);selectedPost$=this.selectedPostSubject.asObservable();prepareParams({params:e,options:t}){let r=new y;if(e){t?.allowNull||(e=Object.fromEntries(Object.entries(e).filter(([o,a])=>a!=null&&a!=="")));for(let[o,a]of Object.entries(e))Array.isArray(a)?a.forEach((l,m)=>{r=r.append(`${o}[${m}]`,String(l))}):r=r.set(o,String(a))}return r}sanitizeHtml(e){return this._sanitizer.bypassSecurityTrustHtml(e)}stripHtml(e){if(!e||typeof e!="string")return"";try{let t=e.replace(/<[^>]*>/g,""),r=document.createElement("textarea");return r.innerHTML=t,r.value}catch(t){return console.error("Error stripping HTML:",t),""}}selectPost(e){this.selectedPostSubject.next(e)}static \u0275fac=function(t){return new(t||i)(n(S))};static \u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})};var P={production:!0,wordpressApiBaseUrl:"https://carlamaid.qa/wordpress/index.php/wp-json/wp/v2",lang:"en",languages:["ar","en"],direction:"ltr",backendApiUrl:"https://api.carlamaid.qa/api",skipCash:{apiUrl:"https://api.skipcash.app",clientId:"7242ee4f-ca43-44bb-804c-4f0c621bb54d",returnUrl:"https://carlamaid.qa/book-now/success",cancelUrl:"https://carlamaid.qa/book-now/cancel",callbackUrl:"https://carlamaid.qa/api/payment/callback",webhookKey:"a43ef9131-140e-4871-8586-94b8f69f32b2",webhookUrl:"https://carlamaid.qa/api/skipcash/webhook"}};var k=class i{constructor(e,t){this._http=e;this._sharedService=t}wordpressApiBaseUrl=P.wordpressApiBaseUrl;getPosts(e){return this._http.get(`${this.wordpressApiBaseUrl}/posts`,{params:e})}getCategories(){return this._http.get(`${this.wordpressApiBaseUrl}/categories`)}getPostsByCategoriesNames(e,t,r){return this.getCategories().pipe(w(o=>{let a=o.filter(s=>t.some(f=>s.name.toLowerCase()===f.toLowerCase())).map(s=>s.id),l=o.find(s=>s.name.toLowerCase()===e.toLowerCase())?.id;if(a.length!==t.length)return u([]);let m=this._sharedService.prepareParams({params:b(d({},r),{categories:l})});return this.getPosts(m).pipe(g(s=>s.filter(f=>a.every(j=>f.categories.includes(j)))))}))}static \u0275fac=function(t){return new(t||i)(n(v),n(c))};static \u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})};export{c as a,k as b};
